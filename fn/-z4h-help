case $ARGC-$1 in
  2-help)
    case $2 in
      install)
        print -Pr -- "usage: %F{2}z4h%f %Binstall%b [-f] [%Uuser/project%u]..."
        print -Pr -- ""
        print -Pr -- "Clone or update GitHub project(s)."
      ;;
      update)
        print -Pr -- "usage: %F{2}z4h%f %Bupdate%b"
        print -Pr -- ""
        print -Pr -- "Update %Bzsh4humans%b and all dependencies (%Bfzf%b, %Bzsh-autosuggestions%b, etc.)."
      ;;
      init)
        print -Pr -- "usage: %F{2}z4h%f %Binit%b"
        print -Pr -- ""
        print -Pr -- "Initialize Zsh. Should be called just once from %U.zshrc%u."
      ;;
      source)
        print -Pr -- "usage: %F{2}z4h%f %Bsource%b %Ufile%u"
        print -Pr -- ""
        print -Pr -- "Compile and source Zsh file if it exists. This is done with current options."
      ;;
      ssh)
        -z4h-help-ssh
        return
      ;;
      chsh)
        print -Pr -- "usage: %F{2}z4h%f %Bchsh%b"
        print -Pr -- ""
        print -Pr -- "Check whether current user's login shell is %F{2}zsh%f. If not, offer to"
        print -Pr -- "change login shell."
      ;;
      help)
        print -Pr -- "usage: %F{2}z4h%f %Bhelp%b [%Ucommand%u]"
        print -Pr -- ""
        print -Pr -- "Print help for the command."
      ;;
      *)
        print -Pru2 -- "%F{3}z4h%f: unknown command: %F{1}${2//\%/%%}%f"
        return 1
      ;;
    esac
    return 0
  ;;
  *)
    [[ $ARGC-$1 == 1-help ]] && local fd=1 ret=0 || local fd=2 ret=1
    print -Pru$fd -- "usage: %F{2}z4h%f %Binstall%b [-f] [%Uuser/project%u]..."
    print -Pru$fd -- "           %Bupdate%b"
    print -Pru$fd -- "           %Binit%b"
    print -Pru$fd -- "           %Bsource%b %Ufile%u"
    print -Pru$fd -- "           %Bssh%b [%Ussh-options%u] [%Uuser@%u]%Uhostname%u"
    print -Pru$fd -- "           %Bchsh%b"
    print -Pru$fd -- "           %Bhelp%b [%Ucommand%u]"
    return ret
  ;;
esac
