emulate -L zsh

if [[ -e $Z4H/tmp/updating ]]; then
  print -ru2 -- ${(%):-"%F{3}z4h%f: updating %Bfzf%b binary"}
else
  print -ru2 -- ${(%):-"%F{3}z4h%f: fetching %Bfzf%b binary"}
fi
local BASH_SOURCE=(./install) err
if ! err=$(emulate sh && set -- --bin && source "${BASH_SOURCE[0]}" 2>&1); then
  print -ru2 -- $err
  return 1
fi
if [[ -h ./bin/fzf ]]; then
  command cp -- ./bin/fzf ./bin/fzf.tmp || return
  zf_mv -f -- ./bin/fzf.tmp ./bin/fzf   || return
fi
