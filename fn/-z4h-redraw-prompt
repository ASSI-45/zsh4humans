local -i c=$((${+terminfo[civis]} && ${+terminfo[cnorm]}))
{
  (( c )) && echoti civis
  local f
  for f in chpwd "${chpwd_functions[@]}" precmd "${precmd_functions[@]}"; do
    [[ "${+functions[$f]}" == 0 ]] || "$f" &>/dev/null || true
  done
  zle .reset-prompt
  # zle -R
} always {
  (( c )) && echoti cnorm
}
