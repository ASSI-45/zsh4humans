local -i ret

if (( ${+widgets[-z4h-orig-zle-line-finish]} )); then
  zle -z4h-orig-zle-line-finish "$@" || ret=$?
fi

if (( ${+_z4h_redraw_fd} )); then
  zle -F "$_z4h_redraw_fd"
  exec {_z4h_redraw_fd}>&-
  unset _z4h_redraw_fd
fi

_zsh_autosuggest_highlight_reset
_zsh_highlight

return ret
